!function($){"use strict";navigator.userAgent.indexOf("Windows")>0?$(document).keyup(function(e){return akh.keymove(e.keyCode),!1}):(window.keycodes={left:21,right:22,up:19,down:20,esc:4,enter:23},window.top.specialMessager&&(window.top.specialMessager.keyDown=function(key){akh.keymove(window.keycodes[key])})),window.keymove=function($key){window.starcorExt||akh.keymove($key)};var androidKeyHandler=function(){this.target="focusBtn:visible",this.focusClass="on",this.parent="body",navigator.userAgent.indexOf("Windows")>0?this.keyNum=[13,37,38,39,40,192]:this.keyNum=[23,21,19,22,20,4],this.btns="",this.cur_btn=""};androidKeyHandler.prototype={init:function($start){var self=this;self.btns=$(self.parent+" ."+self.target),self.btns.each(function(index,element){var o=$(element),offset=o.offset();o.data("l",offset.left).data("t",offset.top)});var focusBtn="";$start instanceof jQuery?($(self.parent+" ."+self.focusClass).removeClass(self.focusClass),focusBtn=$start):"undefined"!=typeof $start&&$start>=0?($(self.parent+" ."+self.focusClass).removeClass(self.focusClass),focusBtn=self.btns.eq($start)):focusBtn=$(self.parent).find("."+self.defaultBtn).length>0?$(self.parent).find("."+self.defaultBtn).eq(0):$(self.parent+" ."+self.focusClass+":visible").length>0?$(self.parent+" ."+self.focusClass+":visible").eq(0):self.btns.eq(0),self.currentBtnElement=focusBtn,self.currentBtnElement.addClass(self.focusClass)},keymove:function($key){var self=this,keyNum=self.keyNum;self.cur_btn=$(self.parent+" ."+self.target+"."+self.focusClass),$key!=keyNum[0]&&66!=$key||self.cur_btn.click(),$key==keyNum[5]&&(window.starcorExt?starcorExt.closeBrowser("1"):window.top.specialMessager.quit()),$key==keyNum[1]&&self.filterBtn(self.btns,"left"),$key==keyNum[2]&&self.filterBtn(self.btns,"up"),$key==keyNum[3]&&self.filterBtn(self.btns,"right"),$key==keyNum[4]&&self.filterBtn(self.btns,"down")},filterBtn:function($btns,$direction){var self=this,newBtn="",range=0,cur_btn=self.cur_btn,b=[];b.l=cur_btn.data("l"),b.t=cur_btn.data("t"),b.w=cur_btn.width(),b.h=cur_btn.height(),b.x=b.l+b.w/2,b.y=b.t+b.h/2;var r;$btns.each(function(index,element){var o=$(element),a=[];a.l=o.data("l"),a.t=o.data("t"),a.w=o.width(),a.h=o.height(),a.x=a.l+a.w/2,a.y=a.t+a.h/2,"up"==$direction&&(a.l+a.w<b.l||a.l>b.l+b.w||a.t+a.h<=b.t+1&&(r=self.distance(b.x,b.t,a.x,a.y),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o))),"down"==$direction&&(a.l+a.w<b.l||a.l>b.l+b.w||a.t>b.t&&(r=self.distance(b.l,b.t+b.h,a.l,a.t),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o))),"left"==$direction&&(a.t+a.h<b.t||a.t>b.t+b.h||a.l+a.w<=b.l&&(r=self.distance(b.l,b.t,a.l+a.w,a.t),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o))),"right"==$direction&&(a.t+a.h<b.t||a.t>b.t+b.h||a.l>=b.l+b.w&&(r=self.distance(b.l+b.w,b.t,a.l,a.t),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o)))}),""==newBtn&&$btns.each(function(index,element){var o=$(element),a=[];a.l=o.data("l"),a.t=o.data("t"),a.w=o.width(),a.h=o.height(),a.x=a.l+a.w/2,a.y=a.t+a.h/2,"up"==$direction&&a.t+a.h<b.t&&(r=self.distance(b.x,b.y,a.x,a.y),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o)),"down"==$direction&&a.t>b.t&&(r=self.distance(b.x,b.y,a.x,a.y),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o)),"left"==$direction&&a.l+a.w<b.l&&(r=self.distance(b.x,b.y,a.x,a.y),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o)),"right"==$direction&&a.l>b.l+b.w&&(r=self.distance(b.x,b.y,a.x,a.y),""==newBtn?(newBtn=o,range=r):r<range&&(range=r,newBtn=o))}),""!=newBtn&&self.setCurBtn(newBtn)},setCurBtn:function($btn){var self=this;return self.cur_btn.removeClass(self.focusClass),$btn.addClass(self.focusClass),self.cur_btn=$btn,$btn},distance:function(x1,y1,x2,y2){var calX=x2-x1,calY=y2-y1;return Math.pow(calX*calX+calY*calY,.5)},checkMask:function(){}},window.akh=new androidKeyHandler,akh.init()}(jQuery);
//# sourceMappingURL=akh.js.map